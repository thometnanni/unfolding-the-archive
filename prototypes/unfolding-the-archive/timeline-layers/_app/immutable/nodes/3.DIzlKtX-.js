import{s as Ze,n as Te,d as F,P as ve,B as fn,Q as se,R as $t,S as Je,i as G,e as k,T as De,p as c,f as q,h as P,q as je,k as te,j as B,l as V,m as ne,t as Q,U as hn,b as de,V as he,W as ge,z as X,r as ce,w as en,A as Ue,o as gn,X as Ke}from"../chunks/JVHggO_0.js";import{S as Be,i as Qe,d as et,t as We,a as Ie,m as tt,e as nt,b as rt,c as mn,f as $e,g as _n}from"../chunks/CiENj-cP.js";import{p as dn}from"../chunks/CJbUd3DD.js";function Z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function yt(e,t,n){const r=e.slice();return r[17]=t[n],r}function wt(e){let t,n=e[17].name+"",r,l,a,o,s=e[17].count+"",i,u,g,y,M;function Y(){return e[16](e[17])}return{c(){t=V("li"),r=Q(n),l=ne(),a=V("span"),o=Q("("),i=Q(s),u=Q(")"),g=ne(),this.h()},l(U){t=q(U,"LI",{class:!0});var p=P(t);r=B(p,n),l=te(p),a=q(p,"SPAN",{class:!0});var S=P(a);o=B(S,"("),i=B(S,s),u=B(S,")"),S.forEach(F),g=te(p),p.forEach(F),this.h()},h(){c(a,"class","svelte-f0xqan"),c(t,"class","svelte-f0xqan")},m(U,p){G(U,t,p),k(t,r),k(t,l),k(t,a),k(a,o),k(a,i),k(a,u),k(t,g),y||(M=De(t,"click",Y),y=!0)},p(U,p){e=U,p&8&&n!==(n=e[17].name+"")&&de(r,n),p&8&&s!==(s=e[17].count+"")&&de(i,s)},d(U){U&&F(t),y=!1,M()}}}function pn(e){let t,n,r,l="Compact",a,o,s="Extended",i,u,g="Save as PDF",y,M,Y,U,p,S,b,E,_,f=Z(e[3]),v=[];for(let h=0;h<f.length;h+=1)v[h]=wt(yt(e,f,h));return{c(){t=V("div"),n=V("div"),r=V("button"),r.textContent=l,a=ne(),o=V("button"),o.textContent=s,i=ne(),u=V("button"),u.textContent=g,y=Q(`

    Font Size
    `),M=V("input"),Y=ne(),U=V("div"),p=V("input"),S=ne(),b=V("ul");for(let h=0;h<v.length;h+=1)v[h].c();this.h()},l(h){t=q(h,"DIV",{class:!0});var T=P(t);n=q(T,"DIV",{class:!0});var z=P(n);r=q(z,"BUTTON",{class:!0,"data-svelte-h":!0}),je(r)!=="svelte-12cq2qj"&&(r.textContent=l),a=te(z),o=q(z,"BUTTON",{class:!0,"data-svelte-h":!0}),je(o)!=="svelte-1q6zgm9"&&(o.textContent=s),i=te(z),u=q(z,"BUTTON",{class:!0,"data-svelte-h":!0}),je(u)!=="svelte-g5xpm3"&&(u.textContent=g),y=B(z,`

    Font Size
    `),M=q(z,"INPUT",{type:!0,min:!0,max:!0,class:!0}),z.forEach(F),Y=te(T),U=q(T,"DIV",{class:!0});var I=P(U);p=q(I,"INPUT",{type:!0,placeholder:!0,class:!0}),S=te(I),b=q(I,"UL",{class:!0});var R=P(b);for(let m=0;m<v.length;m+=1)v[m].l(R);R.forEach(F),I.forEach(F),T.forEach(F),this.h()},h(){c(r,"class","svelte-f0xqan"),se(r,"active",e[1]==="compact"),c(o,"class","svelte-f0xqan"),se(o,"active",e[1]==="extended"),c(u,"class","svelte-f0xqan"),c(M,"type","number"),c(M,"min","6"),c(M,"max","48"),c(M,"class","svelte-f0xqan"),c(n,"class","svelte-f0xqan"),c(p,"type","text"),c(p,"placeholder","Search layersâ€¦"),c(p,"class","svelte-f0xqan"),c(b,"class","suggestions svelte-f0xqan"),c(U,"class","search-box svelte-f0xqan"),c(t,"class","controls svelte-f0xqan")},m(h,T){G(h,t,T),k(t,n),k(n,r),k(n,a),k(n,o),k(n,i),k(n,u),k(n,y),k(n,M),Je(M,e[2]),k(t,Y),k(t,U),k(U,p),Je(p,e[0]),k(U,S),k(U,b);for(let z=0;z<v.length;z+=1)v[z]&&v[z].m(b,null);E||(_=[De(r,"click",e[11]),De(o,"click",e[12]),De(u,"click",e[6]),De(M,"input",e[13]),De(p,"input",e[14]),De(p,"input",e[15])],E=!0)},p(h,[T]){if(T&2&&se(r,"active",h[1]==="compact"),T&2&&se(o,"active",h[1]==="extended"),T&4&&$t(M.value)!==h[2]&&Je(M,h[2]),T&1&&p.value!==h[0]&&Je(p,h[0]),T&40){f=Z(h[3]);let z;for(z=0;z<f.length;z+=1){const I=yt(h,f,z);v[z]?v[z].p(I,T):(v[z]=wt(I),v[z].c(),v[z].m(b,null))}for(;z<v.length;z+=1)v[z].d(1);v.length=f.length}},i:Te,o:Te,d(h){h&&F(t),ve(v,h),E=!1,fn(_)}}}function vn(e,t,n){let r,l,a,{viewMode:o}=t,{searchTerm:s=""}=t,{data:i=[]}=t,{baseFontSize:u=12}=t,{paperSize:g="A4"}=t;const y=hn();function M(f){y("select",f),n(0,s=f.name)}function Y(){y("save",{paperSize:g})}const U=()=>n(1,o="compact"),p=()=>n(1,o="extended");function S(){u=$t(this.value),n(2,u)}function b(){s=this.value,n(0,s)}const E=()=>y("search",s),_=f=>M(f);return e.$$set=f=>{"viewMode"in f&&n(1,o=f.viewMode),"searchTerm"in f&&n(0,s=f.searchTerm),"data"in f&&n(7,i=f.data),"baseFontSize"in f&&n(2,u=f.baseFontSize),"paperSize"in f&&n(8,g=f.paperSize)},e.$$.update=()=>{e.$$.dirty&128&&n(10,r=i.flatMap(f=>f.layers.map(v=>v.name)).reduce((f,v)=>(f[v]=(f[v]||0)+1,f),{})),e.$$.dirty&1024&&n(9,l=Object.keys(r).map(f=>({name:f,count:r[f]})).sort((f,v)=>v.count-f.count)),e.$$.dirty&513&&n(3,a=l.filter(f=>f.name.toLowerCase().includes(s.toLowerCase())))},[s,o,u,a,y,M,Y,i,g,l,r,U,p,S,b,E,_]}class yn extends Be{constructor(t){super(),Qe(this,t,vn,pn,Ze,{viewMode:1,searchTerm:0,data:7,baseFontSize:2,paperSize:8})}}const ct=new Date,ft=new Date;function pe(e,t,n,r){function l(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return l.floor=a=>(e(a=new Date(+a)),a),l.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),l.round=a=>{const o=l(a),s=l.ceil(a);return a-o<s-a?o:s},l.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),l.range=(a,o,s)=>{const i=[];if(a=l.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return i;let u;do i.push(u=new Date(+a)),t(a,s),e(a);while(u<a&&a<o);return i},l.filter=a=>pe(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(l.count=(a,o)=>(ct.setTime(+a),ft.setTime(+o),e(ct),e(ft),Math.floor(n(ct,ft))),l.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?l.filter(r?o=>r(o)%a===0:o=>l.count(0,o)%a===0):l)),l}const wn=1e3,dt=wn*60,bn=dt*60,Re=bn*24,tn=Re*7,pt=pe(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*dt)/Re,e=>e.getDate()-1);pt.range;const vt=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Re,e=>e.getUTCDate()-1);vt.range;const Tn=pe(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Re,e=>Math.floor(e/Re));Tn.range;function ze(e){return pe(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*dt)/tn)}const nn=ze(0),lt=ze(1),Cn=ze(2),Mn=ze(3),xe=ze(4),kn=ze(5),Dn=ze(6);nn.range;lt.range;Cn.range;Mn.range;xe.range;kn.range;Dn.range;function Ye(e){return pe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tn)}const rn=Ye(0),ot=Ye(1),Un=Ye(2),Sn=Ye(3),He=Ye(4),Fn=Ye(5),zn=Ye(6);rn.range;ot.range;Un.range;Sn.range;He.range;Fn.range;zn.range;const ln=pe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ln.range;const Yn=pe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Yn.range;const Se=pe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Se.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Se.range;const Fe=pe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Fe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Fe.range;function ht(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ne(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Ln(e){var t=e.dateTime,n=e.date,r=e.time,l=e.periods,a=e.days,o=e.shortDays,s=e.months,i=e.shortMonths,u=Oe(l),g=qe(l),y=Oe(a),M=qe(a),Y=Oe(o),U=qe(o),p=Oe(s),S=qe(s),b=Oe(i),E=qe(i),_={a:$,A:x,b:ke,B:fe,c:null,d:Dt,e:Dt,f:tr,g:fr,G:gr,H:Kn,I:$n,j:er,L:on,m:nr,M:rr,p:Ce,q:Me,Q:Ft,s:zt,S:lr,u:or,U:ar,V:sr,w:ir,W:ur,x:null,X:null,y:cr,Y:hr,Z:mr,"%":St},f={a:ye,A:re,b:we,B:at,c:null,d:Ut,e:Ut,f:vr,g:Sr,G:zr,H:_r,I:dr,j:pr,L:sn,m:yr,M:wr,p:st,q:be,Q:Ft,s:zt,S:br,u:Tr,U:Cr,V:Mr,w:kr,W:Dr,x:null,X:null,y:Ur,Y:Fr,Z:Yr,"%":St},v={a:R,A:m,b:W,B:H,c:D,d:Mt,e:Mt,f:Bn,g:Ct,G:Tt,H:kt,I:kt,j:jn,L:Zn,m:Vn,M:Rn,p:I,q:qn,Q:Gn,s:Jn,S:Xn,u:Hn,U:Pn,V:An,w:xn,W:Nn,x:J,X:Le,y:Ct,Y:Tt,Z:On,"%":Qn};_.x=h(n,_),_.X=h(r,_),_.c=h(t,_),f.x=h(n,f),f.X=h(r,f),f.c=h(t,f);function h(C,L){return function(A){var d=[],le=-1,j=0,ie=C.length,ue,oe,it;for(A instanceof Date||(A=new Date(+A));++le<ie;)C.charCodeAt(le)===37&&(d.push(C.slice(j,le)),(oe=bt[ue=C.charAt(++le)])!=null?ue=C.charAt(++le):oe=ue==="e"?" ":"0",(it=L[ue])&&(ue=it(A,oe)),d.push(ue),j=le+1);return d.push(C.slice(j,le)),d.join("")}}function T(C,L){return function(A){var d=Ne(1900,void 0,1),le=z(d,C,A+="",0),j,ie;if(le!=A.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(d.s*1e3+("L"in d?d.L:0));if(L&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+d.p*12),d.m===void 0&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(j=gt(Ne(d.y,0,1)),ie=j.getUTCDay(),j=ie>4||ie===0?ot.ceil(j):ot(j),j=vt.offset(j,(d.V-1)*7),d.y=j.getUTCFullYear(),d.m=j.getUTCMonth(),d.d=j.getUTCDate()+(d.w+6)%7):(j=ht(Ne(d.y,0,1)),ie=j.getDay(),j=ie>4||ie===0?lt.ceil(j):lt(j),j=pt.offset(j,(d.V-1)*7),d.y=j.getFullYear(),d.m=j.getMonth(),d.d=j.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),ie="Z"in d?gt(Ne(d.y,0,1)).getUTCDay():ht(Ne(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+d.W*7-(ie+5)%7:d.w+d.U*7-(ie+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,gt(d)):ht(d)}}function z(C,L,A,d){for(var le=0,j=L.length,ie=A.length,ue,oe;le<j;){if(d>=ie)return-1;if(ue=L.charCodeAt(le++),ue===37){if(ue=L.charAt(le++),oe=v[ue in bt?L.charAt(le++):ue],!oe||(d=oe(C,A,d))<0)return-1}else if(ue!=A.charCodeAt(d++))return-1}return d}function I(C,L,A){var d=u.exec(L.slice(A));return d?(C.p=g.get(d[0].toLowerCase()),A+d[0].length):-1}function R(C,L,A){var d=Y.exec(L.slice(A));return d?(C.w=U.get(d[0].toLowerCase()),A+d[0].length):-1}function m(C,L,A){var d=y.exec(L.slice(A));return d?(C.w=M.get(d[0].toLowerCase()),A+d[0].length):-1}function W(C,L,A){var d=b.exec(L.slice(A));return d?(C.m=E.get(d[0].toLowerCase()),A+d[0].length):-1}function H(C,L,A){var d=p.exec(L.slice(A));return d?(C.m=S.get(d[0].toLowerCase()),A+d[0].length):-1}function D(C,L,A){return z(C,t,L,A)}function J(C,L,A){return z(C,n,L,A)}function Le(C,L,A){return z(C,r,L,A)}function $(C){return o[C.getDay()]}function x(C){return a[C.getDay()]}function ke(C){return i[C.getMonth()]}function fe(C){return s[C.getMonth()]}function Ce(C){return l[+(C.getHours()>=12)]}function Me(C){return 1+~~(C.getMonth()/3)}function ye(C){return o[C.getUTCDay()]}function re(C){return a[C.getUTCDay()]}function we(C){return i[C.getUTCMonth()]}function at(C){return s[C.getUTCMonth()]}function st(C){return l[+(C.getUTCHours()>=12)]}function be(C){return 1+~~(C.getUTCMonth()/3)}return{format:function(C){var L=h(C+="",_);return L.toString=function(){return C},L},parse:function(C){var L=T(C+="",!1);return L.toString=function(){return C},L},utcFormat:function(C){var L=h(C+="",f);return L.toString=function(){return C},L},utcParse:function(C){var L=T(C+="",!0);return L.toString=function(){return C},L}}}var bt={"-":"",_:" ",0:"0"},ee=/^\s*\d+/,En=/^%/,Wn=/[\\^$*+?|[\]().{}]/g;function N(e,t,n){var r=e<0?"-":"",l=(r?-e:e)+"",a=l.length;return r+(a<n?new Array(n-a+1).join(t)+l:l)}function In(e){return e.replace(Wn,"\\$&")}function Oe(e){return new RegExp("^(?:"+e.map(In).join("|")+")","i")}function qe(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xn(e,t,n){var r=ee.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Hn(e,t,n){var r=ee.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Pn(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function An(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Nn(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Tt(e,t,n){var r=ee.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ct(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function On(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qn(e,t,n){var r=ee.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Vn(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Mt(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function jn(e,t,n){var r=ee.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function kt(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rn(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Xn(e,t,n){var r=ee.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Zn(e,t,n){var r=ee.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Bn(e,t,n){var r=ee.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qn(e,t,n){var r=En.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Gn(e,t,n){var r=ee.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Jn(e,t,n){var r=ee.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Dt(e,t){return N(e.getDate(),t,2)}function Kn(e,t){return N(e.getHours(),t,2)}function $n(e,t){return N(e.getHours()%12||12,t,2)}function er(e,t){return N(1+pt.count(Se(e),e),t,3)}function on(e,t){return N(e.getMilliseconds(),t,3)}function tr(e,t){return on(e,t)+"000"}function nr(e,t){return N(e.getMonth()+1,t,2)}function rr(e,t){return N(e.getMinutes(),t,2)}function lr(e,t){return N(e.getSeconds(),t,2)}function or(e){var t=e.getDay();return t===0?7:t}function ar(e,t){return N(nn.count(Se(e)-1,e),t,2)}function an(e){var t=e.getDay();return t>=4||t===0?xe(e):xe.ceil(e)}function sr(e,t){return e=an(e),N(xe.count(Se(e),e)+(Se(e).getDay()===4),t,2)}function ir(e){return e.getDay()}function ur(e,t){return N(lt.count(Se(e)-1,e),t,2)}function cr(e,t){return N(e.getFullYear()%100,t,2)}function fr(e,t){return e=an(e),N(e.getFullYear()%100,t,2)}function hr(e,t){return N(e.getFullYear()%1e4,t,4)}function gr(e,t){var n=e.getDay();return e=n>=4||n===0?xe(e):xe.ceil(e),N(e.getFullYear()%1e4,t,4)}function mr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+N(t/60|0,"0",2)+N(t%60,"0",2)}function Ut(e,t){return N(e.getUTCDate(),t,2)}function _r(e,t){return N(e.getUTCHours(),t,2)}function dr(e,t){return N(e.getUTCHours()%12||12,t,2)}function pr(e,t){return N(1+vt.count(Fe(e),e),t,3)}function sn(e,t){return N(e.getUTCMilliseconds(),t,3)}function vr(e,t){return sn(e,t)+"000"}function yr(e,t){return N(e.getUTCMonth()+1,t,2)}function wr(e,t){return N(e.getUTCMinutes(),t,2)}function br(e,t){return N(e.getUTCSeconds(),t,2)}function Tr(e){var t=e.getUTCDay();return t===0?7:t}function Cr(e,t){return N(rn.count(Fe(e)-1,e),t,2)}function un(e){var t=e.getUTCDay();return t>=4||t===0?He(e):He.ceil(e)}function Mr(e,t){return e=un(e),N(He.count(Fe(e),e)+(Fe(e).getUTCDay()===4),t,2)}function kr(e){return e.getUTCDay()}function Dr(e,t){return N(ot.count(Fe(e)-1,e),t,2)}function Ur(e,t){return N(e.getUTCFullYear()%100,t,2)}function Sr(e,t){return e=un(e),N(e.getUTCFullYear()%100,t,2)}function Fr(e,t){return N(e.getUTCFullYear()%1e4,t,4)}function zr(e,t){var n=e.getUTCDay();return e=n>=4||n===0?He(e):He.ceil(e),N(e.getUTCFullYear()%1e4,t,4)}function Yr(){return"+0000"}function St(){return"%"}function Ft(e){return+e}function zt(e){return Math.floor(+e/1e3)}var Ee,_t;Lr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lr(e){return Ee=Ln(e),_t=Ee.format,Ee.parse,Ee.utcFormat,Ee.utcParse,Ee}function Xe(e){e=e==-1?257:e;const t={0:"#000000",1:"#CC0000",2:"#CCCC00",3:"#00CC00",4:"#00CCCC",5:"#0000CC",6:"#CC00CC",7:"#ccc",8:"#000000",9:"#C0C0C0",256:"#ccc",257:"#000000"};if(t.hasOwnProperty(e))return t[e];const r=(Math.max(10,Math.min(255,e))-10)/245*360,[l,a,o]=Er(r/360,1,.5);return Wr(l,a,o)}function Er(e,t,n){let r,l,a;{const o=(u,g,y)=>(y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?u+(g-u)*6*y:y<.5?g:y<.6666666666666666?u+(g-u)*(.6666666666666666-y)*6:u),s=n+t-n*t,i=2*n-s;r=o(i,s,e+1/3),l=o(i,s,e),a=o(i,s,e-1/3)}return[Math.round(r*255),Math.round(l*255),Math.round(a*255)]}function Wr(e,t,n){const r=l=>l.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(n)}`}function Yt(e,t,n){const r=e.slice();return r[7]=t[n],r}function Lt(e){let t,n;return{c(){t=ge("path"),this.h()},l(r){t=he(r,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),P(t).forEach(F),this.h()},h(){c(t,"d",n=e[7]),c(t,"fill","none"),c(t,"stroke",e[0]),c(t,"stroke-width",e[1]),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round")},m(r,l){G(r,t,l)},p(r,l){l&16&&n!==(n=r[7])&&c(t,"d",n),l&1&&c(t,"stroke",r[0]),l&2&&c(t,"stroke-width",r[1])},d(r){r&&F(t)}}}function Ir(e){let t,n=Z(e[4]),r=[];for(let l=0;l<n.length;l+=1)r[l]=Lt(Yt(e,n,l));return{c(){t=ge("svg");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=he(l,"svg",{class:!0,width:!0,height:!0});var a=P(t);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(F),this.h()},h(){c(t,"class","connections-layer svelte-1u4wgls"),c(t,"width",e[2]),c(t,"height",e[3])},m(l,a){G(l,t,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(l,[a]){if(a&19){n=Z(l[4]);let o;for(o=0;o<n.length;o+=1){const s=Yt(l,n,o);r[o]?r[o].p(s,a):(r[o]=Lt(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}a&4&&c(t,"width",l[2]),a&8&&c(t,"height",l[3])},i:Te,o:Te,d(l){l&&F(t),ve(r,l)}}}const Et=200;function xr(e,t,n){let r,{rows:l=[]}=t,{searchTerm:a=""}=t,{strokeColor:o="#000"}=t,{strokeWidth:s=.5}=t,{width:i=0}=t,{height:u=0}=t;return e.$$set=g=>{"rows"in g&&n(5,l=g.rows),"searchTerm"in g&&n(6,a=g.searchTerm),"strokeColor"in g&&n(0,o=g.strokeColor),"strokeWidth"in g&&n(1,s=g.strokeWidth),"width"in g&&n(2,i=g.width),"height"in g&&n(3,u=g.height)},e.$$.update=()=>{e.$$.dirty&96&&n(4,r=(()=>{if(!a)return[];const g=a.toLowerCase(),y=new Map;return!l||l.length===0?[]:(l.forEach(M=>{(M.layers??M.ticks??[]).forEach(U=>{const p=U.text;if(!p||U.count===0||p.toLowerCase()!==g)return;const S=U.x,b="y"in U?U.y:(U.y1+U.y2)/2,E=`${p}||${U.count}`;y.has(E)||y.set(E,[]),y.get(E).push({x:S,y:b})})}),Array.from(y.values()).filter(M=>M.length>1).map(M=>{const Y=M.slice().sort((p,S)=>p.x-S.x);let U=`M ${Y[0].x} ${Y[0].y}`;for(let p=1;p<Y.length;p++){const S=Y[p-1],b=Y[p],E=S.x-Et,_=S.y,f=b.x-Et,v=b.y;U+=` C ${E} ${_} ${f} ${v} ${b.x} ${b.y}`}return U}))})())},[o,s,i,u,r,l,a]}class Hr extends Be{constructor(t){super(),Qe(this,t,xr,Ir,Ze,{rows:5,searchTerm:6,strokeColor:0,strokeWidth:1,width:2,height:3})}}function Wt(e,t,n){const r=e.slice();return r[31]=t[n],r}function It(e,t,n){const r=e.slice();return r[39]=t[n],r}function xt(e,t,n){const r=e.slice();return r[31]=t[n],r}function Ht(e,t,n){const r=e.slice();return r[34]=t[n],r}function Pt(e,t,n){const r=e.slice();return r[42]=t[n],r}function At(e,t,n){const r=e.slice();return r[42]=t[n],r}function Nt(e,t,n){const r=e.slice();return r[47]=t[n],r}function Ot(e,t,n){const r=e.slice();return r[47]=t[n],r}function qt(e){let t,n,r;return{c(){t=ge("line"),this.h()},l(l){t=he(l,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0,style:!0}),P(t).forEach(F),this.h()},h(){c(t,"class","grid v svelte-6ykna8"),c(t,"x1",n=e[2](e[47])),c(t,"x2",r=e[2](e[47])),c(t,"y1",0),c(t,"y2",e[9]),X(t,"stroke-width",e[15]/2+"px")},m(l,a){G(l,t,a)},p(l,a){a[0]&12&&n!==(n=l[2](l[47]))&&c(t,"x1",n),a[0]&12&&r!==(r=l[2](l[47]))&&c(t,"x2",r),a[0]&512&&c(t,"y2",l[9]),a[0]&32768&&X(t,"stroke-width",l[15]/2+"px")},d(l){l&&F(t)}}}function Vt(e){let t,n=_t("%b %Y")(e[47])+"",r,l,a;return{c(){t=ge("text"),r=Q(n),this.h()},l(o){t=he(o,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,style:!0});var s=P(t);r=B(s,n),s.forEach(F),this.h()},h(){c(t,"class","axis-label svelte-6ykna8"),c(t,"x",l=e[2](e[47])),c(t,"y",a=e[6].top-e[7]),c(t,"text-anchor","middle"),X(t,"font-size",e[7]+"px")},m(o,s){G(o,t,s),k(t,r)},p(o,s){s[0]&8&&n!==(n=_t("%b %Y")(o[47])+"")&&de(r,n),s[0]&12&&l!==(l=o[2](o[47]))&&c(t,"x",l),s[0]&192&&a!==(a=o[6].top-o[7])&&c(t,"y",a),s[0]&128&&X(t,"font-size",o[7]+"px")},d(o){o&&F(t)}}}function jt(e){let t,n,r;return{c(){t=ge("line"),this.h()},l(l){t=he(l,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0,style:!0}),P(t).forEach(F),this.h()},h(){c(t,"class","grid v svelte-6ykna8"),c(t,"x1",n=e[42].x),c(t,"x2",r=e[42].x),c(t,"y1",0),c(t,"y2",e[9]),X(t,"stroke-width",e[15]/2+"px")},m(l,a){G(l,t,a)},p(l,a){a[0]&1024&&n!==(n=l[42].x)&&c(t,"x1",n),a[0]&1024&&r!==(r=l[42].x)&&c(t,"x2",r),a[0]&512&&c(t,"y2",l[9]),a[0]&32768&&X(t,"stroke-width",l[15]/2+"px")},d(l){l&&F(t)}}}function Rt(e){let t,n=e[16](e[42].gap)+"",r,l,a;return{c(){t=ge("text"),r=Q(n),this.h()},l(o){t=he(o,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,style:!0});var s=P(t);r=B(s,n),s.forEach(F),this.h()},h(){c(t,"class","axis-break svelte-6ykna8"),c(t,"x",l=e[42].x),c(t,"y",a=e[6].top-e[7]),c(t,"text-anchor","middle"),X(t,"font-size",e[7]+"px")},m(o,s){G(o,t,s),k(t,r)},p(o,s){s[0]&1024&&n!==(n=o[16](o[42].gap)+"")&&de(r,n),s[0]&1024&&l!==(l=o[42].x)&&c(t,"x",l),s[0]&192&&a!==(a=o[6].top-o[7])&&c(t,"y",a),s[0]&128&&X(t,"font-size",o[7]+"px")},d(o){o&&F(t)}}}function Pr(e){let t,n=Z(e[4]),r=[];for(let l=0;l<n.length;l+=1)r[l]=Zt(Wt(e,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();t=ce()},l(l){for(let a=0;a<r.length;a+=1)r[a].l(l);t=ce()},m(l,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(l,a);G(l,t,a)},p(l,a){if(a[0]&16528){n=Z(l[4]);let o;for(o=0;o<n.length;o+=1){const s=Wt(l,n,o);r[o]?r[o].p(s,a):(r[o]=Zt(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(l){l&&F(t),ve(r,l)}}}function Ar(e){let t,n=Z(e[11]),r=[];for(let l=0;l<n.length;l+=1)r[l]=Qt(xt(e,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();t=ce()},l(l){for(let a=0;a<r.length;a+=1)r[a].l(l);t=ce()},m(l,a){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(l,a);G(l,t,a)},p(l,a){if(a[0]&51328){n=Z(l[11]);let o;for(o=0;o<n.length;o+=1){const s=xt(l,n,o);r[o]?r[o].p(s,a):(r[o]=Qt(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(l){l&&F(t),ve(r,l)}}}function Xt(e){let t,n=e[39].text+"",r,l,a=" ",o,s,i=e[39].count+"",u,g,y,M,Y,U;return{c(){t=ge("text"),r=Q(n),l=ge("tspan"),o=Q(a),s=Q("("),u=Q(i),g=Q(")"),y=ne(),this.h()},l(p){t=he(p,"text",{class:!0,x:!0,y:!0,fill:!0,style:!0});var S=P(t);r=B(S,n),l=he(S,"tspan",{style:!0,class:!0});var b=P(l);o=B(b,a),s=B(b,"("),u=B(b,i),g=B(b,")"),b.forEach(F),y=te(S),S.forEach(F),this.h()},h(){var p;X(l,"font-size",e[7]*.5+"px"),X(l,"fill","#666"),X(l,"dominant-baseline","no-change"),c(l,"class","svelte-6ykna8"),c(t,"class","layer-text svelte-6ykna8"),c(t,"x",M=e[39].x),c(t,"y",Y=e[39].y),c(t,"fill",U=((p=e[14].get(e[39].colorIndex))==null?void 0:p.color_hex)||Xe(e[39].colorIndex||0)),X(t,"font-size",e[7]+"px"),se(t,"highlight",e[39].highlight),se(t,"hidden",!e[39].visible),se(t,"empty",e[39].count==0)},m(p,S){G(p,t,S),k(t,r),k(t,l),k(l,o),k(l,s),k(l,u),k(l,g),k(t,y)},p(p,S){var b;S[0]&16&&n!==(n=p[39].text+"")&&de(r,n),S[0]&16&&i!==(i=p[39].count+"")&&de(u,i),S[0]&128&&X(l,"font-size",p[7]*.5+"px"),S[0]&16&&M!==(M=p[39].x)&&c(t,"x",M),S[0]&16&&Y!==(Y=p[39].y)&&c(t,"y",Y),S[0]&16400&&U!==(U=((b=p[14].get(p[39].colorIndex))==null?void 0:b.color_hex)||Xe(p[39].colorIndex||0))&&c(t,"fill",U),S[0]&128&&X(t,"font-size",p[7]+"px"),S[0]&16&&se(t,"highlight",p[39].highlight),S[0]&16&&se(t,"hidden",!p[39].visible),S[0]&16&&se(t,"empty",p[39].count==0)},d(p){p&&F(t)}}}function Zt(e){let t,n=e[31].name+"",r,l,a,o,s=Z(e[31].layers),i=[];for(let u=0;u<s.length;u+=1)i[u]=Xt(It(e,s,u));return{c(){t=ge("text"),r=Q(n);for(let u=0;u<i.length;u+=1)i[u].c();o=ce(),this.h()},l(u){t=he(u,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,style:!0});var g=P(t);r=B(g,n),g.forEach(F);for(let y=0;y<i.length;y+=1)i[y].l(u);o=ce(),this.h()},h(){c(t,"class","proj-label svelte-6ykna8"),c(t,"x",l=e[31].labelX),c(t,"y",a=e[31].labelY),c(t,"text-anchor","end"),X(t,"font-size",e[7]/1.2+"px")},m(u,g){G(u,t,g),k(t,r);for(let y=0;y<i.length;y+=1)i[y]&&i[y].m(u,g);G(u,o,g)},p(u,g){if(g[0]&16&&n!==(n=u[31].name+"")&&de(r,n),g[0]&16&&l!==(l=u[31].labelX)&&c(t,"x",l),g[0]&16&&a!==(a=u[31].labelY)&&c(t,"y",a),g[0]&128&&X(t,"font-size",u[7]/1.2+"px"),g[0]&16528){s=Z(u[31].layers);let y;for(y=0;y<s.length;y+=1){const M=It(u,s,y);i[y]?i[y].p(M,g):(i[y]=Xt(M),i[y].c(),i[y].m(o.parentNode,o))}for(;y<i.length;y+=1)i[y].d(1);i.length=s.length}},d(u){u&&(F(t),F(o)),ve(i,u)}}}function Bt(e){let t,n,r,l,a,o;return{c(){t=ge("line"),this.h()},l(s){t=he(s,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0,style:!0,stroke:!0}),P(t).forEach(F),this.h()},h(){var s;c(t,"class","tick svelte-6ykna8"),c(t,"x1",n=e[34].x),c(t,"x2",r=e[34].x),c(t,"y1",l=e[34].y1),c(t,"y2",a=e[34].y2),X(t,"stroke-width",(e[34].highlight?e[15]*3:e[15])+"px"),c(t,"stroke",o=((s=e[14].get(e[34].colorIndex))==null?void 0:s.color_hex)||Xe(e[34].colorIndex||0)),se(t,"highlight",e[34].highlight),se(t,"hidden",!e[34].visible),se(t,"empty",e[34].count==0)},m(s,i){G(s,t,i)},p(s,i){var u;i[0]&2048&&n!==(n=s[34].x)&&c(t,"x1",n),i[0]&2048&&r!==(r=s[34].x)&&c(t,"x2",r),i[0]&2048&&l!==(l=s[34].y1)&&c(t,"y1",l),i[0]&2048&&a!==(a=s[34].y2)&&c(t,"y2",a),i[0]&34816&&X(t,"stroke-width",(s[34].highlight?s[15]*3:s[15])+"px"),i[0]&18432&&o!==(o=((u=s[14].get(s[34].colorIndex))==null?void 0:u.color_hex)||Xe(s[34].colorIndex||0))&&c(t,"stroke",o),i[0]&2048&&se(t,"highlight",s[34].highlight),i[0]&2048&&se(t,"hidden",!s[34].visible),i[0]&2048&&se(t,"empty",s[34].count==0)},d(s){s&&F(t)}}}function Qt(e){let t,n=e[31].name+"",r,l,a,o=Z(e[31].ticks),s=[];for(let i=0;i<o.length;i+=1)s[i]=Bt(Ht(e,o,i));return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=ge("text"),r=Q(n),this.h()},l(i){for(let g=0;g<s.length;g+=1)s[g].l(i);t=he(i,"text",{class:!0,x:!0,y:!0,"text-anchor":!0,style:!0});var u=P(t);r=B(u,n),u.forEach(F),this.h()},h(){c(t,"class","proj-label svelte-6ykna8"),c(t,"x",l=e[31].labelX),c(t,"y",a=e[31].labelY),c(t,"text-anchor","end"),X(t,"font-size",e[7]/1.2+"px")},m(i,u){for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(i,u);G(i,t,u),k(t,r)},p(i,u){if(u[0]&51200){o=Z(i[31].ticks);let g;for(g=0;g<o.length;g+=1){const y=Ht(i,o,g);s[g]?s[g].p(y,u):(s[g]=Bt(y),s[g].c(),s[g].m(t.parentNode,t))}for(;g<s.length;g+=1)s[g].d(1);s.length=o.length}u[0]&2048&&n!==(n=i[31].name+"")&&de(r,n),u[0]&2048&&l!==(l=i[31].labelX)&&c(t,"x",l),u[0]&2048&&a!==(a=i[31].labelY)&&c(t,"y",a),u[0]&128&&X(t,"font-size",i[7]/1.2+"px")},d(i){i&&F(t),ve(s,i)}}}function Nr(e){let t,n,r,l,a,o,s,i,u,g,y,M,Y,U,p,S=Z(e[3]),b=[];for(let m=0;m<S.length;m+=1)b[m]=qt(Ot(e,S,m));let E=Z(e[3]),_=[];for(let m=0;m<E.length;m+=1)_[m]=Vt(Nt(e,E,m));let f=Z(e[10]),v=[];for(let m=0;m<f.length;m+=1)v[m]=jt(At(e,f,m));let h=Z(e[10]),T=[];for(let m=0;m<h.length;m+=1)T[m]=Rt(Pt(e,h,m));g=new Hr({props:{rows:e[0]==="compact"?e[11]:e[4],searchTerm:e[1],strokeWidth:e[15]/2,width:e[6].left+e[8]+e[6].right,height:e[9],viewMode:e[0]}});function z(m,W){return m[0]==="compact"?Ar:Pr}let I=z(e),R=I(e);return{c(){t=V("div"),n=V("div"),r=ge("svg");for(let m=0;m<b.length;m+=1)b[m].c();l=ce();for(let m=0;m<_.length;m+=1)_[m].c();a=ce();for(let m=0;m<v.length;m+=1)v[m].c();o=ce();for(let m=0;m<T.length;m+=1)T[m].c();i=ne(),u=V("div"),rt(g.$$.fragment),y=ne(),M=ge("svg"),R.c(),this.h()},l(m){t=q(m,"DIV",{class:!0});var W=P(t);n=q(W,"DIV",{class:!0});var H=P(n);r=he(H,"svg",{width:!0,height:!0,class:!0});var D=P(r);for(let $=0;$<b.length;$+=1)b[$].l(D);l=ce();for(let $=0;$<_.length;$+=1)_[$].l(D);a=ce();for(let $=0;$<v.length;$+=1)v[$].l(D);o=ce();for(let $=0;$<T.length;$+=1)T[$].l(D);D.forEach(F),H.forEach(F),i=te(W),u=q(W,"DIV",{class:!0,style:!0});var J=P(u);nt(g.$$.fragment,J),y=te(J),M=he(J,"svg",{width:!0,height:!0,class:!0});var Le=P(M);R.l(Le),Le.forEach(F),J.forEach(F),W.forEach(F),this.h()},h(){c(r,"width",s=e[6].left+e[8]+e[6].right),c(r,"height",e[9]),c(r,"class","svelte-6ykna8"),c(n,"class","axis-container svelte-6ykna8"),c(M,"width",Y=e[6].left+e[8]+e[6].right),c(M,"height",e[9]),c(M,"class","svelte-6ykna8"),c(u,"class",U="rows-container "+(e[1]?"searching":"")+" svelte-6ykna8"),X(u,"height",e[9]+"px"),c(t,"class","timeline-wrapper")},m(m,W){G(m,t,W),k(t,n),k(n,r);for(let H=0;H<b.length;H+=1)b[H]&&b[H].m(r,null);k(r,l);for(let H=0;H<_.length;H+=1)_[H]&&_[H].m(r,null);k(r,a);for(let H=0;H<v.length;H+=1)v[H]&&v[H].m(r,null);k(r,o);for(let H=0;H<T.length;H+=1)T[H]&&T[H].m(r,null);e[25](n),k(t,i),k(t,u),tt(g,u,null),k(u,y),k(u,M),R.m(M,null),e[26](u),e[27](t),p=!0},p(m,W){if(W[0]&33292){S=Z(m[3]);let D;for(D=0;D<S.length;D+=1){const J=Ot(m,S,D);b[D]?b[D].p(J,W):(b[D]=qt(J),b[D].c(),b[D].m(r,l))}for(;D<b.length;D+=1)b[D].d(1);b.length=S.length}if(W[0]&204){E=Z(m[3]);let D;for(D=0;D<E.length;D+=1){const J=Nt(m,E,D);_[D]?_[D].p(J,W):(_[D]=Vt(J),_[D].c(),_[D].m(r,a))}for(;D<_.length;D+=1)_[D].d(1);_.length=E.length}if(W[0]&34304){f=Z(m[10]);let D;for(D=0;D<f.length;D+=1){const J=At(m,f,D);v[D]?v[D].p(J,W):(v[D]=jt(J),v[D].c(),v[D].m(r,o))}for(;D<v.length;D+=1)v[D].d(1);v.length=f.length}if(W[0]&66752){h=Z(m[10]);let D;for(D=0;D<h.length;D+=1){const J=Pt(m,h,D);T[D]?T[D].p(J,W):(T[D]=Rt(J),T[D].c(),T[D].m(r,null))}for(;D<T.length;D+=1)T[D].d(1);T.length=h.length}(!p||W[0]&320&&s!==(s=m[6].left+m[8]+m[6].right))&&c(r,"width",s),(!p||W[0]&512)&&c(r,"height",m[9]);const H={};W[0]&2065&&(H.rows=m[0]==="compact"?m[11]:m[4]),W[0]&2&&(H.searchTerm=m[1]),W[0]&32768&&(H.strokeWidth=m[15]/2),W[0]&320&&(H.width=m[6].left+m[8]+m[6].right),W[0]&512&&(H.height=m[9]),W[0]&1&&(H.viewMode=m[0]),g.$set(H),I===(I=z(m))&&R?R.p(m,W):(R.d(1),R=I(m),R&&(R.c(),R.m(M,null))),(!p||W[0]&320&&Y!==(Y=m[6].left+m[8]+m[6].right))&&c(M,"width",Y),(!p||W[0]&512)&&c(M,"height",m[9]),(!p||W[0]&2&&U!==(U="rows-container "+(m[1]?"searching":"")+" svelte-6ykna8"))&&c(u,"class",U),(!p||W[0]&512)&&X(u,"height",m[9]+"px")},i(m){p||(Ie(g.$$.fragment,m),p=!0)},o(m){We(g.$$.fragment,m),p=!1},d(m){m&&F(t),ve(b,m),ve(_,m),ve(v,m),ve(T,m),e[25](null),et(g),R.d(),e[26](null),e[27](null)}}}const Ve=200,mt=31536e6,Or=864e5;function qr(e,t,n){let r,l,a,o,s,i,u,g,y,{data:M=[]}=t,{viewMode:Y}=t,{searchTerm:U=""}=t,{baseFontSize:p=12}=t,{ctbData:S=null}=t,b=0,E=0,_,f=[],v=[],h=[],T=[],z,I,R;function m(){!z||!I||n(5,I.style.height=E+"px",I)}function W(){const x=I.querySelectorAll(".proj-label"),ke=100;let fe=null,Ce=1/0;if(x.forEach(Me=>{const ye=Me.getBoundingClientRect(),re=ye.top+ye.height/2,we=Math.abs(re-ke);we<Ce&&(Ce=we,fe=Me)}),fe){const Me=fe.getBoundingClientRect(),ye=I.getBoundingClientRect(),we=Me.right-ye.left+I.scrollLeft-400;I.scrollTo({left:we,behavior:"instant"}),R.scrollTo({left:we,behavior:"instant"})}}en(()=>(m(),window.addEventListener("resize",m),window.addEventListener("scroll",W),()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",W)}));const H=mt/12;function D(x){const fe=[{n:Math.floor(x/mt),label:"year"},{n:Math.floor(x%mt/H),label:"month"},{n:Math.floor(x%H/Or),label:"day"}].find(Ce=>Ce.n);return fe?`${fe.n} ${fe.label}${fe.n>1?"s":""}`:"0 days"}function J(x){Ue[x?"unshift":"push"](()=>{R=x,n(13,R)})}function Le(x){Ue[x?"unshift":"push"](()=>{I=x,n(5,I)})}function $(x){Ue[x?"unshift":"push"](()=>{z=x,n(12,z)})}return e.$$set=x=>{"data"in x&&n(17,M=x.data),"viewMode"in x&&n(0,Y=x.viewMode),"searchTerm"in x&&n(1,U=x.searchTerm),"baseFontSize"in x&&n(18,p=x.baseFontSize),"ctbData"in x&&n(19,S=x.ctbData)},e.$$.update=()=>{if(e.$$.dirty[0]&262144&&n(7,r=p),e.$$.dirty[0]&128&&n(6,l={top:r*2,right:r*30,bottom:r*6,left:r*20}),e.$$.dirty[0]&128&&n(22,a=r*1.7),e.$$.dirty[0]&128&&n(23,o=r*.25),e.$$.dirty[0]&128&&n(20,s=r*1),e.$$.dirty[0]&128&&n(24,i=r*.6),e.$$.dirty[0]&128&&n(21,u=r*.5),e.$$.dirty[0]&128&&n(15,g=r*.1),e.$$.dirty[0]&524288&&n(14,y=S?new Map(S.map(x=>[x.aci,x])):new Map),e.$$.dirty[0]&32637183&&M.length&&I){const x=[...M].sort((w,O)=>{const K=w.birthtime?new Date(w.birthtime).getTime():1/0,me=O.birthtime?new Date(O.birthtime).getTime():1/0;return K-me}),ke=x.map(w=>w.birthtime?new Date(w.birthtime):null),fe=ke.filter(w=>w instanceof Date&&!isNaN(w)),Ce=fe.length?new Date(Math.max(...fe.map(w=>w.getTime()))):new Date;let Me=0;const ye=ke.map(w=>w instanceof Date&&!isNaN(w)?w:new Date(Ce.getTime()+ ++Me*1e3)),re=ye.slice().sort((w,O)=>w-O),we=re.slice(1).map((w,O)=>w.getTime()-re[O].getTime()),at=Math.max(...we),st=we.indexOf(at)+1;let be=[],C=[],L={start:re[0],end:re[0]};for(let w=1;w<re.length;w++)w===st?(L.end=re[w-1],be.push(L),C.push({start:re[w-1],end:re[w]}),L={start:re[w],end:re[w]}):L.end=re[w];be.push(L);const A=x.map(w=>w.path.split("/").pop()),d=Math.max(...A.map(w=>w.length))*i,le=Math.max(window.innerWidth-l.left-l.right,r*10)+d,j=be.reduce((w,O)=>w+(O.end-O.start),0),ie=le-C.length*Ve,ue=w=>w>0?w/j*ie:0;let oe=l.left;be.forEach(w=>{w.startPx=oe;const O=w.end-w.start,K=ue(O);w.endPx=oe+K;const me=C.find(ae=>ae.start.getTime()===w.end.getTime());oe+=K,me&&(me.startPx=oe,me.endPx=oe+Ve,oe+=Ve)}),n(2,_=w=>{if(!w)return l.left;const O=w.getTime(),K=be.find(ae=>O>=ae.start&&O<=ae.end);if(K){const ae=K.end>K.start?(O-K.start)/(K.end-K.start):0;return K.startPx+ae*(K.endPx-K.startPx)}const me=C.find(ae=>O>ae.start&&O<ae.end);return me?me.startPx+Ve/2:O<be[0].start?l.left:oe}),n(8,b=oe-l.left);let Ge=[];be.forEach(w=>{Ge.push(w.start),ln.every(1).range(w.start,w.end).forEach(O=>Ge.push(O)),Ge.push(w.end)});const Pe=Array.from(new Set(Ge.map(w=>w.getTime()))).map(w=>new Date(w)).sort((w,O)=>w-O),cn=r*7.4;if(n(3,f=[]),Pe.length){f.push(Pe[0]);for(let w=1;w<Pe.length;w++)Math.abs(_(Pe[w])-_(f[f.length-1]))>cn&&f.push(Pe[w])}if(n(10,v=C.map(w=>({x:w.startPx+Ve/2,gap:w.end.getTime()-w.start.getTime()}))),Y==="compact")n(9,E=l.top+a*x.length+l.bottom);else{let w=l.top;x.forEach(O=>w+=(O.layers.length+1)*s+s),n(9,E=w+l.bottom)}n(11,h=x.map((w,O)=>{const K=_(ye[O]),me=Math.round(K),ae=l.top+O*a;return{name:w.path.split("/").pop(),ticks:w.layers.map((_e,Ae)=>({x:Math.round(K+Ae*o),y1:ae+o,y2:ae+a-o,text:_e.name,count:_e.entityCount||0,colorIndex:_e.color,visible:_e.visible,highlight:U&&_e.name.toLowerCase()===U.toLowerCase()})),labelX:me-u,labelY:ae+a/2}})),n(4,T=[]);let ut=l.top;x.forEach((w,O)=>{const K=_(ye[O]),me=Math.round(K),ae=w.layers.map((_e,Ae)=>ut+(Ae+2)*s);T.push({name:w.path.split("/").pop(),labelX:me-u,labelY:ae[0]||ut+s,layers:w.layers.map((_e,Ae)=>({text:_e.name,x:Math.round(K),y:ae[Ae],count:_e.entityCount||0,colorIndex:_e.color,visible:_e.visible,highlight:U&&_e.name.toLowerCase()===U.toLowerCase()}))}),ut+=(w.layers.length+1)*s+s}),m()}},[Y,U,_,f,T,I,l,r,b,E,v,h,z,R,y,g,D,M,p,S,s,u,a,o,i,J,Le,$]}class Vr extends Be{constructor(t){super(),Qe(this,t,qr,Nr,Ze,{data:17,viewMode:0,searchTerm:1,baseFontSize:18,ctbData:19},null,[-1,-1])}}function Gt(e,t,n){const r=e.slice();return r[3]=t[n].aci,r[4]=t[n].name,r[5]=t[n].lineweight_mm,r[6]=t[n].hex,r}function Jt(e){let t,n,r,l,a;return{c(){t=V("p"),n=Q("Highlighted the layers named "),r=V("strong"),l=Q(e[1]),a=Q(` and connected them
      with a line when they appear identically across multiple files.`),this.h()},l(o){t=q(o,"P",{class:!0});var s=P(t);n=B(s,"Highlighted the layers named "),r=q(s,"STRONG",{});var i=P(r);l=B(i,e[1]),i.forEach(F),a=B(s,` and connected them
      with a line when they appear identically across multiple files.`),s.forEach(F),this.h()},h(){c(t,"class","search-info svelte-zo52wf")},m(o,s){G(o,t,s),k(t,n),k(t,r),k(r,l),k(t,a)},p(o,s){s&2&&de(l,o[1])},d(o){o&&F(t)}}}function Kt(e){let t,n,r,l,a=(e[5]||e[4])+"",o,s;return{c(){t=V("div"),n=V("span"),r=ne(),l=V("span"),o=Q(a),s=ne(),this.h()},l(i){t=q(i,"DIV",{class:!0});var u=P(t);n=q(u,"SPAN",{class:!0,style:!0}),P(n).forEach(F),r=te(u),l=q(u,"SPAN",{});var g=P(l);o=B(g,a),g.forEach(F),s=te(u),u.forEach(F),this.h()},h(){c(n,"class","color-box svelte-zo52wf"),X(n,"background-color",e[6]),c(t,"class","svelte-zo52wf")},m(i,u){G(i,t,u),k(t,n),k(t,r),k(t,l),k(l,o),k(t,s)},p(i,u){u&4&&X(n,"background-color",i[6]),u&4&&a!==(a=(i[5]||i[4])+"")&&de(o,a)},d(i){i&&F(t)}}}function jr(e){let t,n,r,l,a,o,s,i,u,g=`The colors follow the AutoCAD Color Index (ACI), which differentiates layers
    based on their functionâ€”such as structure, annotations, or construction
    details.`,y,M,Y,U,p,S,b=e[1]&&Jt(e),E=Z(e[2]),_=[];for(let f=0;f<E.length;f+=1)_[f]=Kt(Gt(e,E,f));return{c(){t=V("div"),n=V("p"),r=Q("This timeline visualises the layers of AutoCAD files in the "),l=V("em"),a=Q(e[0]),o=Q(`
    project. It displays the layers across different files, with each file represented
    as a row.`),s=ne(),b&&b.c(),i=ne(),u=V("p"),u.textContent=g,y=ne(),M=V("div"),Y=V("div");for(let f=0;f<_.length;f+=1)_[f].c();U=ne(),p=V("h1"),S=Q(e[0]),this.h()},l(f){t=q(f,"DIV",{class:!0});var v=P(t);n=q(v,"P",{class:!0});var h=P(n);r=B(h,"This timeline visualises the layers of AutoCAD files in the "),l=q(h,"EM",{});var T=P(l);a=B(T,e[0]),T.forEach(F),o=B(h,`
    project. It displays the layers across different files, with each file represented
    as a row.`),h.forEach(F),s=te(v),b&&b.l(v),i=te(v),u=q(v,"P",{class:!0,"data-svelte-h":!0}),je(u)!=="svelte-1rahc2n"&&(u.textContent=g),y=te(v),M=q(v,"DIV",{class:!0});var z=P(M);Y=q(z,"DIV",{class:!0});var I=P(Y);for(let m=0;m<_.length;m+=1)_[m].l(I);I.forEach(F),z.forEach(F),U=te(v),p=q(v,"H1",{class:!0});var R=P(p);S=B(R,e[0]),R.forEach(F),v.forEach(F),this.h()},h(){c(n,"class","svelte-zo52wf"),c(u,"class","svelte-zo52wf"),c(Y,"class","legend-grid svelte-zo52wf"),c(M,"class","legend svelte-zo52wf"),c(p,"class","timeline-title svelte-zo52wf"),c(t,"class","info svelte-zo52wf")},m(f,v){G(f,t,v),k(t,n),k(n,r),k(n,l),k(l,a),k(n,o),k(t,s),b&&b.m(t,null),k(t,i),k(t,u),k(t,y),k(t,M),k(M,Y);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(Y,null);k(t,U),k(t,p),k(p,S)},p(f,[v]){if(v&1&&de(a,f[0]),f[1]?b?b.p(f,v):(b=Jt(f),b.c(),b.m(t,i)):b&&(b.d(1),b=null),v&4){E=Z(f[2]);let h;for(h=0;h<E.length;h+=1){const T=Gt(f,E,h);_[h]?_[h].p(T,v):(_[h]=Kt(T),_[h].c(),_[h].m(Y,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=E.length}v&1&&de(S,f[0])},i:Te,o:Te,d(f){f&&F(t),b&&b.d(),ve(_,f)}}}function Rr(e,t,n){let{title:r=""}=t,{searchTerm:l=""}=t,{aciLegend:a=[]}=t;return e.$$set=o=>{"title"in o&&n(0,r=o.title),"searchTerm"in o&&n(1,l=o.searchTerm),"aciLegend"in o&&n(2,a=o.aciLegend)},[r,l,a]}class Xr extends Be{constructor(t){super(),Qe(this,t,Rr,jr,Ze,{title:0,searchTerm:1,aciLegend:2})}}function Zr(e){let t,n="Loading timelineâ€¦";return{c(){t=V("p"),t.textContent=n,this.h()},l(r){t=q(r,"P",{class:!0,"data-svelte-h":!0}),je(t)!=="svelte-1ykb76v"&&(t.textContent=n),this.h()},h(){c(t,"class","svelte-13805ir")},m(r,l){G(r,t,l)},p:Te,i:Te,o:Te,d(r){r&&F(t)}}}function Br(e){let t,n,r,l,a,o,s,i,u,g,y,M,Y;r=new Vr({props:{data:e[0],viewMode:e[2],searchTerm:e[3],baseFontSize:e[4],ctbData:e[1]}}),a=new Xr({props:{title:e[6],searchTerm:e[3],aciLegend:e[7]}});function U(_){e[14](_)}function p(_){e[15](_)}function S(_){e[16](_)}function b(_){e[17](_)}let E={data:e[0]};return e[4]!==void 0&&(E.baseFontSize=e[4]),e[2]!==void 0&&(E.viewMode=e[2]),e[3]!==void 0&&(E.searchTerm=e[3]),e[5]!==void 0&&(E.paperSize=e[5]),s=new yn({props:E}),Ue.push(()=>$e(s,"baseFontSize",U)),Ue.push(()=>$e(s,"viewMode",p)),Ue.push(()=>$e(s,"searchTerm",S)),Ue.push(()=>$e(s,"paperSize",b)),s.$on("save",Gr),s.$on("mode",e[8]),s.$on("search",e[9]),{c(){t=V("article"),n=V("div"),rt(r.$$.fragment),l=ne(),rt(a.$$.fragment),o=ne(),rt(s.$$.fragment),this.h()},l(_){t=q(_,"ARTICLE",{class:!0});var f=P(t);n=q(f,"DIV",{class:!0});var v=P(n);nt(r.$$.fragment,v),v.forEach(F),l=te(f),nt(a.$$.fragment,f),o=te(f),nt(s.$$.fragment,f),f.forEach(F),this.h()},h(){c(n,"class","timeline-wrapper svelte-13805ir"),c(t,"class",M="poster "+e[5]+" svelte-13805ir")},m(_,f){G(_,t,f),k(t,n),tt(r,n,null),k(t,l),tt(a,t,null),k(t,o),tt(s,t,null),Y=!0},p(_,f){const v={};f&1&&(v.data=_[0]),f&4&&(v.viewMode=_[2]),f&8&&(v.searchTerm=_[3]),f&16&&(v.baseFontSize=_[4]),f&2&&(v.ctbData=_[1]),r.$set(v);const h={};f&64&&(h.title=_[6]),f&8&&(h.searchTerm=_[3]),f&128&&(h.aciLegend=_[7]),a.$set(h);const T={};f&1&&(T.data=_[0]),!i&&f&16&&(i=!0,T.baseFontSize=_[4],Ke(()=>i=!1)),!u&&f&4&&(u=!0,T.viewMode=_[2],Ke(()=>u=!1)),!g&&f&8&&(g=!0,T.searchTerm=_[3],Ke(()=>g=!1)),!y&&f&32&&(y=!0,T.paperSize=_[5],Ke(()=>y=!1)),s.$set(T),(!Y||f&32&&M!==(M="poster "+_[5]+" svelte-13805ir"))&&c(t,"class",M)},i(_){Y||(Ie(r.$$.fragment,_),Ie(a.$$.fragment,_),Ie(s.$$.fragment,_),Y=!0)},o(_){We(r.$$.fragment,_),We(a.$$.fragment,_),We(s.$$.fragment,_),Y=!1},d(_){_&&F(t),et(r),et(a),et(s)}}}function Qr(e){let t,n,r,l;const a=[Br,Zr],o=[];function s(i,u){return i[0].length>0?0:1}return t=s(e),n=o[t]=a[t](e),{c(){n.c(),r=ce()},l(i){n.l(i),r=ce()},m(i,u){o[t].m(i,u),G(i,r,u),l=!0},p(i,[u]){let g=t;t=s(i),t===g?o[t].p(i,u):(_n(),We(o[g],1,1,()=>{o[g]=null}),mn(),n=o[t],n?n.p(i,u):(n=o[t]=a[t](i),n.c()),Ie(n,1),n.m(r.parentNode,r))},i(i){l||(Ie(n),l=!0)},o(i){We(n),l=!1},d(i){i&&F(r),o[t].d(i)}}}function Gr(e){window.print()}function Jr(e,t,n){let r,l,a,o,s;gn(e,dn,h=>n(13,s=h));let i=[],u="compact",g="",y=12,M="A4",Y=null,U=null;async function p(h){const T=`../ctb/${h}.json`;try{const z=await fetch(T);if(z.ok){const I=await z.json();n(1,Y=I.styles||I)}}catch(z){console.error("Failed to load CTB:",z)}}en(async()=>{const h=window.location.pathname;n(10,U=new URLSearchParams(window.location.search).get("ctb"));const z=`../data/${h.split("/").pop()}.json`;try{const I=await fetch(z);if(I.ok){const R=await I.json(),m=new Set;n(0,i=R.filter(W=>m.has(W.path)?!1:(m.add(W.path),W.layers&&W.layers.length>0)))}}catch(I){console.error(`Error fetching ${z}:`,I)}});function S(h){n(2,u=h.detail)}function b(h){n(3,g=h.detail)}function E(h){y=h,n(4,y)}function _(h){u=h,n(2,u)}function f(h){g=h,n(3,g)}function v(h){M=h,n(5,M)}return e.$$.update=()=>{e.$$.dirty&8192&&s.params.slug,e.$$.dirty&1024&&U&&p(U),e.$$.dirty&1&&n(12,r=Array.from(new Set(i.flatMap(h=>{var T;return(T=h.layers)==null?void 0:T.map(z=>z.color===-1?257:z.color).filter(z=>z!=null)}))).sort((h,T)=>h-T)),e.$$.dirty&2&&n(11,l=Y?new Map(Y.map(h=>[h.aci,h])):new Map),e.$$.dirty&6144&&n(7,a=r.map(h=>{const T=l.get(h);return{aci:h,name:(T==null?void 0:T.localized_name)||`ACI ${h}`,hex:(T==null?void 0:T.color_hex)||Xe(h),lineweight_mm:(T==null?void 0:T.lineweight_mm)||void 0}})),e.$$.dirty&8192&&n(6,o=s.params.slug.replace(/-/g," ").replace(/_/g," ").replace(/(^\w)/,h=>h.toUpperCase()))},[i,Y,u,g,y,M,o,a,S,b,U,l,r,s,E,_,f,v]}class tl extends Be{constructor(t){super(),Qe(this,t,Jr,Qr,Ze,{})}}export{tl as component};
